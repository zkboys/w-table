!function(t,e,a,i){var n=function(e,a){this.$element=e,this.tableDefaults={showCheckbox:!0,showRowIndex:!1,rowIndexStart:1,columns:[],tableData:[],operationWidth:100,operation:null,primaryKey:"id"},this.columnDefaults={name:"columnName",field:"columnField",width:"100px",align:"left",valueFilter:function(t){return t}},this.options=t.extend({},this.tableDefaults,a);for(var i=this.options.columns,n=i.length,d=0;n>d;d++){var o=i[d];i[d]=t.extend({},this.columnDefaults,o)}var l=this.options.operationWidth;this.options.operationWidth="number"==typeof l?l+"px":l};n.prototype={init:function(){function a(){var t=s.find("table"),e=l.height(),a=t.height();c.css({height:e-a+"px"})}var i=this,n=i.options,d=n.columns,o=n.tableData,l=i.$element,r="w-table table table-hover table-bordered table-striped";l.html(t('<div class="top"><table class="'+r+'"></table></div><div class="center"><table class="'+r+'"></table></div>'));var s=(l.find(".center table"),l.find(".top")),c=l.find(".center"),h=t("<thead><tr></tr></thead>");n.showCheckbox&&h.find("tr").append('<th style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;"><input type="checkbox" value="main"></div></th>'),n.showRowIndex&&h.find("tr").append('<th style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;">#</div></th>');for(var w=d.length,p=0;w>p;p++){var u=d[p],f=u.width;f="number"==typeof f?f+"px":f,u.width=f;var v=u.name,b=t('<th style="width:'+f+';"><div class="w-table-text" data-owidth="'+f+'" style="text-align:center;width:'+f+'" title="'+v+'">'+v+"</div></th>");b.data("colOpt",u),h.find("tr").append(b)}return n.operation&&h.find("tr").append('<th style="width:'+n.operationWidth+';"><div class="w-table-text"  data-owidth="'+n.operationWidth+'" style="width:'+n.operationWidth+';">操作</div></th>'),s.find("table").html(h),i.load(o),n.showCheckbox&&h.find("tr th input[type=checkbox][value=main]").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked",function(){t("td.w-table-check input[type=checkbox]").iCheck("check")}).on("ifUnchecked",function(){t("td.w-table-check input[type=checkbox]").iCheck("uncheck")}),a(),t(e).on("resize",function(){a()}),c.on("scroll",function(){var e=t(this).scrollLeft();s.scrollLeft(e)}),l},load:function(e,a){var i=this,n=i.$element,d=n.find(".top"),o=i.$element.find(".center table"),l=i.options,r=l.columns;l.rowIndexStart=a?a:l.rowIndexStart;var s=o.find("tbody");s.length<=0?(s=t("<tbody></tbody>"),o.append(s)):s.html("");for(var c=e.length,h=0;c>h;h++){var w=e[h],p=t("<tr></tr>");if(p.data("rowData",w),l.showCheckbox){var u=w[l.primaryKey];p.append('<td class="w-table-check" style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;"><input type="checkbox" name="rowIndex" value="'+u+'"></div></td>')}l.showRowIndex&&p.append('<td class="w-table-index" style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;">'+(h+parseInt(l.rowIndexStart))+"</div></td>");for(var f=r.length,v=0;f>v;v++){var b=r[v],x=b.field,k=b.align,y=b.width,m=b.valueFilter,g=w[x];g=m(g,w,e);var R=' title="'+t("<div>"+g+"</div>").text()+'" ';"string"==typeof g&&g.indexOf("<img")>=0&&(R="");var C=t('<td class="w-table-cell" style="width:'+y+";text-align:"+k+'"><div class="w-table-text" data-owidth="'+y+'" style="text-align:'+k+";width:"+y+' " '+R+">"+g+"</div></td>");p.append(C)}if(l.operation){var S=l.operation(w,e);S&&p.append('<td style="text-align: center;width:'+l.operationWidth+'"><div class="w-table-text" data-owidth="'+l.operationWidth+'" style="width:'+l.operationWidth+';">'+S+"</div></td>")}s.append(p)}if(l.showCheckbox){var D=d.find("thead tr th input[type=checkbox][value=main]");D.iCheck("uncheck"),t("td.w-table-check input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked",function(){var e=t(this),a=e.val(),i=e.parents("tr").data("rowData"),d=n.data("selectedRows")||{};d[a]=i,n.data("selectedRows",d)}).on("ifUnchecked",function(){var e=n.data("selectedRows")||{},a=t(this),i=a.val();delete e[i]});var I=n.data("selectedRows")||{};for(var _ in I)o.find("td.w-table-check input[type=checkbox][value="+_+"]").iCheck("check")}return i.$element},deleteRow:function(t){var e=this,a=e.$element,i=a.data("selectedRows"),n=t.find("td.w-table-check input[type=checkbox]").val();return i&&(delete i[n],a.data("selectedRows",i)),t.remove(),a},deleteSelectedRows:function(){var t=this,e=t.$element,a=e.find(".top"),i=e.find(".center table"),n=e.data("selectedRows")||{};for(var d in n)i.find("td.w-table-check input[type=checkbox][value="+d+"]").parents("tr").remove();var o=a.find("thead tr th input[type=checkbox][value=main]");return o.iCheck("uncheck"),e.data("selectedRows",null),t.rebuildRowsIndex(),e},getSelectedRowsData:function(){var t=this,e=t.$element;return e.data("selectedRows")||null},rebuildRowsIndex:function(){var e=this,a=e.$element.find(".center table"),i=e.options;a.find("tbody tr").each(function(e,a){var n=t(a).index();t(a).find("td.w-table-index").html(n+i.rowIndexStart)})}},t.fn.wTable=function(e){if(this.length<=0)return this;this.data("_wtObj_")||this.data("_wtObj_",new n(this,e));var a=this.data("_wtObj_");if(e==i||"object"==typeof e&&!t.isFunction(e))return a.init();if("string"==typeof e)switch(e){case"load":var d=arguments[1],o=arguments[2];return a.load(d,o);case"getSelectedRowsCount":var l=0,r=a.getSelectedRowsData();if(r)for(var s in r)l++;return l;case"getSelectedRowsData":var r=a.getSelectedRowsData(),c=!1;for(var h in r){c=!0;break}return c?r:null;case"getSelectedRowsPrimaryKey":var r=a.getSelectedRowsData(),w=null;if(r){w=[];for(var s in r)w.push(s)}return w&&w.length>0?w:null;case"deleteSelectedRows":return a.deleteSelectedRows();case"deleteRow":return a.deleteRow(arguments[1]);default:throw"No such method!"}}}(jQuery,window,document);