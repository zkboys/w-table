!function(e,t,a,n){var i=function(t,a){this.$element=t,this.tableDefaults={showCheckbox:!0,showRowIndex:!1,rowIndexStart:1,columns:[],tableData:[],operationWidth:100,operation:null,primaryKey:"id"},this.columnDefaults={name:"columnName",field:"columnField",width:null,align:"left",valueFilter:function(e){return e}},this.options=e.extend({},this.tableDefaults,a);for(var n=this.options.columns,i=n.length,o=0;i>o;o++){var l=n[o];n[o]=e.extend({},this.columnDefaults,l)}var r=this.options.operationWidth;this.options.operationWidth="number"==typeof r?r+"px":r};i.prototype={init:function(){function a(){var e=c.find("table"),t=r.height(),a=e.height();s.css({height:t-a+"px"})}var n=this,i=n.options,o=i.columns,l=i.tableData,r=n.$element,d="w-table table table-hover table-bordered table-striped";r.html(e('<div class="top"><table class="'+d+'"></table></div><div class="center"><table class="'+d+'"></table></div>'));var c=(r.find(".center table"),r.find(".top")),s=r.find(".center"),h=e("<thead><tr></tr></thead>");i.showCheckbox&&h.find("tr").append('<th style="width:40px;"><input type="checkbox" value="main"></th>'),i.showRowIndex&&h.find("tr").append('<th style="width:40px;">#</th>');for(var u=o.length,p=0;u>p;p++){var f=o[p],w=f.width,b="";null!=w&&(w="number"==typeof w?w+"px":w,f.width=w,b="width:"+w+";");var v=f.name,x=e('<th style="'+b+'" title="'+v+'">'+v+"</th>");x.data("colOpt",f),h.find("tr").append(x)}return i.operation&&h.find("tr").append('<th style="width:'+i.operationWidth+';">操作</th>'),c.find("table").html(h),n.load(l),i.showCheckbox&&h.find("tr th input[type=checkbox][value=main]").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked",function(){e("td.w-table-check input[type=checkbox]").iCheck("check")}).on("ifUnchecked",function(){e("td.w-table-check input[type=checkbox]").iCheck("uncheck")}),a(),e(t).on("resize",function(){a()}),s.on("scroll",function(){var t=e(this).scrollLeft();c.scrollLeft(t)}),r},load:function(t,a){var n=this,i=n.$element,o=i.find(".top"),l=n.$element.find(".center table"),r=n.options,d=r.columns;r.rowIndexStart=a?a:r.rowIndexStart;var c=l.find("tbody");c.length<=0?(c=e("<tbody></tbody>"),l.append(c)):c.html("");for(var s=t.length,h=0;s>h;h++){var u=t[h],p=e("<tr></tr>");if(p.data("rowData",u),r.showCheckbox){var f=u[r.primaryKey];p.append('<td class="w-table-check" style="width:40px;"><input type="checkbox" name="rowIndex" value="'+f+'"></td>')}r.showRowIndex&&p.append('<td class="w-table-index" style="width:40px;">'+(h+parseInt(r.rowIndexStart))+"</td>");for(var w=d.length,b=0;w>b;b++){var v=d[b],x=v.field,k=v.align,m=v.width,y=v.valueFilter,g=u[x];g=y(g,u,t);var R=' title="'+e("<div>"+g+"</div>").text()+'" ';"string"==typeof g&&g.indexOf("<img")>=0&&(R="");var C=null!=m?"width:"+m+";":"",S=e('<td class="w-table-cell" style="'+C+"text-align:"+k+'" '+R+">"+g+"</td>");p.append(S)}if(r.operation){var D=r.operation(u,t);D&&p.append('<td style="text-align: center;width:'+r.operationWidth+'">'+D+"</td>")}c.append(p)}if(r.showCheckbox){var I=o.find("thead tr th input[type=checkbox][value=main]");I.iCheck("uncheck"),e("td.w-table-check input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked",function(){var t=e(this),a=t.val(),n=t.parents("tr").data("rowData"),o=i.data("selectedRows")||{};o[a]=n,i.data("selectedRows",o)}).on("ifUnchecked",function(){var t=i.data("selectedRows")||{},a=e(this),n=a.val();delete t[n]});var _=i.data("selectedRows")||{};for(var $ in _)l.find("td.w-table-check input[type=checkbox][value="+$+"]").iCheck("check")}return n.$element},deleteRow:function(e){var t=this,a=t.$element,n=a.data("selectedRows"),i=e.find("td.w-table-check input[type=checkbox]").val();return n&&(delete n[i],a.data("selectedRows",n)),e.remove(),a},deleteSelectedRows:function(){var e=this,t=e.$element,a=t.find(".top"),n=t.find(".center table"),i=t.data("selectedRows")||{};for(var o in i)n.find("td.w-table-check input[type=checkbox][value="+o+"]").parents("tr").remove();var l=a.find("thead tr th input[type=checkbox][value=main]");return l.iCheck("uncheck"),t.data("selectedRows",null),t},getSelectedRowsData:function(){var e=this,t=e.$element;return t.data("selectedRows")||null},rebuildRowsIndex:function(){var t=this,a=t.$element.find(".center table"),n=t.options;a.find("tbody tr").each(function(t,a){var i=e(a).index();e(a).find("td.w-table-index").html(i+n.rowIndexStart)})}},e.fn.wTable=function(t){if(this.length<=0)return this;this.data("_wtObj_")||this.data("_wtObj_",new i(this,t));var a=this.data("_wtObj_");if(t==n||"object"==typeof t&&!e.isFunction(t))return a.init();if("string"==typeof t)switch(t){case"load":var o=arguments[1],l=arguments[2];return a.load(o,l);case"getSelectedRowsCount":var r=0,d=a.getSelectedRowsData();if(d)for(var c in d)r++;return r;case"getSelectedRowsData":var d=a.getSelectedRowsData(),s=!1;for(var h in d){s=!0;break}return s?d:null;case"getSelectedRowsPrimaryKey":var d=a.getSelectedRowsData(),u=null;if(d){u=[];for(var c in d)u.push(c)}return u&&u.length>0?u:null;case"deleteSelectedRows":return a.deleteSelectedRows();case"deleteRow":return a.deleteRow(arguments[1]);default:throw"No such method!"}}}(jQuery,window,document);