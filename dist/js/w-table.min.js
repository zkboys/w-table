!function(t,e,a,i){var n=function(e,a){this.$element=e,this.tableDefaults={showCheckbox:!0,showRowIndex:!1,rowIndexStart:1,columns:[],tableData:[],operationWidth:100,operation:null,primaryKey:"id"},this.columnDefaults={name:"columnName",field:"columnField",width:"100px",align:"left",valueFilter:function(t){return t}},this.options=t.extend({},this.tableDefaults,a);for(var i=this.options.columns,n=i.length,d=0;n>d;d++){var l=i[d];i[d]=t.extend({},this.columnDefaults,l)}var o=this.options.operationWidth;this.options.operationWidth="number"==typeof o?o+"px":o};n.prototype={init:function(){function a(){var t=s.find("table"),e=o.height(),a=t.height();c.css({height:e-a+"px"})}var i=this,n=i.options,d=n.columns,l=n.tableData,o=i.$element,r="w-table table table-hover table-bordered table-striped";o.html(t('<div class="top"><table class="'+r+'"></table></div><div class="center"><table class="'+r+'"></table></div>'));var s=(o.find(".center table"),o.find(".top")),c=o.find(".center"),h=t("<thead><tr></tr></thead>");n.showCheckbox&&h.find("tr").append('<th style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;"><input type="checkbox" value="main"></div></th>'),n.showRowIndex&&h.find("tr").append('<th style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;">#</div></th>');for(var w=d.length,p=0;w>p;p++){var u=d[p],v=u.width;v="number"==typeof v?v+"px":v,u.width=v;var f=u.name,b=t('<th style="width:'+v+';"><div class="w-table-text" data-owidth="'+v+'" style="text-align:center;width:'+v+'" title="'+f+'">'+f+"</div></th>");b.data("colOpt",u),h.find("tr").append(b)}return n.operation&&h.find("tr").append('<th style="width:'+n.operationWidth+';"><div class="w-table-text"  data-owidth="'+n.operationWidth+'" style="width:'+n.operationWidth+';">操作</div></th>'),s.find("table").html(h),i.load(l),n.showCheckbox&&h.find("tr th input[type=checkbox][value=main]").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked",function(){t("td.w-table-check input[type=checkbox]").iCheck("check")}).on("ifUnchecked",function(){t("td.w-table-check input[type=checkbox]").iCheck("uncheck")}),a(),t(e).on("resize",function(){a()}),c.on("scroll",function(){var e=t(this).scrollLeft();s.scrollLeft(e)}),o},load:function(e,a){var i=this,n=i.$element,d=n.find(".top"),l=i.$element.find(".center table"),o=i.options,r=o.columns;o.rowIndexStart=a?a:o.rowIndexStart;var s=l.find("tbody");s.length<=0?(s=t("<tbody></tbody>"),l.append(s)):s.html("");for(var c=e.length,h=0;c>h;h++){var w=e[h],p=t("<tr></tr>");if(p.data("rowData",w),o.showCheckbox){var u=w[o.primaryKey];p.append('<td class="w-table-check" style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;"><input type="checkbox" name="rowIndex" value="'+u+'"></div></td>')}o.showRowIndex&&p.append('<td class="w-table-index" style="width:30px;"><div class="w-table-text" data-owidth="30px" style="width:30px;">'+(h+parseInt(o.rowIndexStart))+"</div></td>");for(var v=r.length,f=0;v>f;f++){var b=r[f],x=b.field,y=b.align,k=b.width,m=b.valueFilter,g=w[x];g=m(g,w,e);var R=' title="'+t("<div>"+g+"</div>").text()+'" ';"string"==typeof g&&g.indexOf("<img")>=0&&(R="");var C=t('<td class="w-table-cell" style="width:'+k+";text-align:"+y+'"><div class="w-table-text" data-owidth="'+k+'" style="text-align:'+y+";width:"+k+' " '+R+">"+g+"</div></td>");p.append(C)}if(o.operation){var S=o.operation(w,e);S&&p.append('<td style="text-align: center;width:'+o.operationWidth+'"><div class="w-table-text" data-owidth="'+o.operationWidth+'" style="width:'+o.operationWidth+';">'+S+"</div></td>")}s.append(p)}if(o.showCheckbox){var D=d.find("thead tr th input[type=checkbox][value=main]");D.iCheck("uncheck"),t("td.w-table-check input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked",function(){var e=t(this),a=e.val(),i=e.parents("tr").data("rowData"),d=n.data("selectedRows")||{};d[a]=i,n.data("selectedRows",d)}).on("ifUnchecked",function(){var e=n.data("selectedRows")||{},a=t(this),i=a.val();delete e[i]});var I=n.data("selectedRows")||{};for(var _ in I)l.find("td.w-table-check input[type=checkbox][value="+_+"]").iCheck("check")}return i.$element},deleteRow:function(t){var e=this,a=e.$element,i=a.data("selectedRows"),n=t.find("td.w-table-check input[type=checkbox]").val();return i&&(delete i[n],a.data("selectedRows",i)),t.remove(),a},deleteSelectedRows:function(){var t=this,e=t.$element,a=e.find(".top"),i=e.find(".center table"),n=e.data("selectedRows")||{};for(var d in n)i.find("td.w-table-check input[type=checkbox][value="+d+"]").parents("tr").remove();var l=a.find("thead tr th input[type=checkbox][value=main]");return l.iCheck("uncheck"),e.data("selectedRows",null),e},getSelectedRowsData:function(){var t=this,e=t.$element;return e.data("selectedRows")||null},rebuildRowsIndex:function(){var e=this,a=e.$element.find(".center table"),i=e.options;a.find("tbody tr").each(function(e,a){var n=t(a).index();t(a).find("td.w-table-index").html('<div class="w-table-text" data-owidth="30px" style="width:30px;">'+(n+i.rowIndexStart)+"</div>")})}},t.fn.wTable=function(e){if(this.length<=0)return this;this.data("_wtObj_")||this.data("_wtObj_",new n(this,e));var a=this.data("_wtObj_");if(e==i||"object"==typeof e&&!t.isFunction(e))return a.init();if("string"==typeof e)switch(e){case"load":var d=arguments[1],l=arguments[2];return a.load(d,l);case"getSelectedRowsCount":var o=0,r=a.getSelectedRowsData();if(r)for(var s in r)o++;return o;case"getSelectedRowsData":var r=a.getSelectedRowsData(),c=!1;for(var h in r){c=!0;break}return c?r:null;case"getSelectedRowsPrimaryKey":var r=a.getSelectedRowsData(),w=null;if(r){w=[];for(var s in r)w.push(s)}return w&&w.length>0?w:null;case"deleteSelectedRows":return a.deleteSelectedRows();case"deleteRow":return a.deleteRow(arguments[1]);default:throw"No such method!"}}}(jQuery,window,document);